<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>WS Test</title>
</head>
<body>
  <div id="log">INIT</div>

  <script>
    const PC_HOST = "192.168.1.5";   // ← Mac の IP
    const PC_PORT = 8080;
    const WS_URL = `ws://${PC_HOST}:${PC_PORT}`;

    const logEl = document.getElementById("log");

    function log(text, color = "black") {
      logEl.textContent = text;
      logEl.style.color = color;
    }

    const ws = new WebSocket(WS_URL);

    ws.onopen = () => {
      log("CONNECTED " + WS_URL, "green");
      ws.send(JSON.stringify({ hello: "world" }));
    };

    ws.onmessage = (ev) => {
      console.log("message:", ev.data);
    };

    ws.onerror = (ev) => {
      log("ERROR", "red");
      console.log("ws error", ev);
    };

    ws.onclose = () => {
      log("CLOSED", "orange");
    };
  </script>
</body>
</html>
